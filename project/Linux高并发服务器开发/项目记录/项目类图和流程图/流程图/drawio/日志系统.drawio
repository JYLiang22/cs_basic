<mxfile host="app.diagrams.net" modified="2024-04-04T10:59:33.750Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36 Edg/123.0.0.0" etag="Js2vQ8JQUgnlj3MGkmCM" version="24.2.1" type="device">
  <diagram id="WTSOYd9RNrSEFyffm4Ss" name="日志系统">
    <mxGraphModel dx="3161" dy="1782" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="4681" pageHeight="3300" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VsNNf81IzaUH2iYFKdmN-1" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-453" y="-138" width="123" height="208" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-2" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;单例模式&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;获取日志实例&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-442.5" y="-97" width="102" height="46" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-3" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;get_instance()&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-446.5" y="-28" width="110" height="58" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-4" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-325" y="-34.5" as="sourcePoint" />
            <mxPoint x="-217" y="-34.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-5" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;初始化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-305" y="-75" width="60" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-6" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;生成日志文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-323" y="-28" width="102" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-7" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;init()函数&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-201" y="-63" width="110" height="58" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-8" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-71" y="-51" as="sourcePoint" />
            <mxPoint x="42" y="-111.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-9" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-67" y="-21" as="sourcePoint" />
            <mxPoint x="39" y="30" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-10" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;异步&lt;/font&gt;&lt;span style=&quot;color: rgba(0, 0, 0, 0); font-family: monospace; font-size: 0px; text-align: start;&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bb%26gt%3B%26lt%3Bfont%20style%3D%26quot%3Bfont-size%3A%2014px%3B%26quot%3B%26gt%3B%E5%88%9D%E5%A7%8B%E5%8C%96%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fb%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BstrokeColor%3Dnone%3BfillColor%3Dnone%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22-305%22%20y%3D%22-75%22%20width%3D%2260%22%20height%3D%2229%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-78" y="-113" width="46" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-11" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;同步&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-78" y="-3" width="46" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-12" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="68" y="-235" width="235" height="143" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-14" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;write_log&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="83" y="-220" width="79" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;分文件判断&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="183" y="-209" width="101" height="42" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-16" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;格式化输出内容&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="89" y="-143" width="115" height="42" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-17" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="68" y="20" width="235" height="143" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;write_log&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="83" y="35" width="79" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-19" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;分文件判断&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="89" y="115" width="101" height="42" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-20" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;格式化输出内容&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="169" y="52" width="115" height="42" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-21" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;flush_log_thread&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;内部调用&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;async_write_log&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="399" y="-138" width="163" height="75" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-22" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="215" y="-115" as="sourcePoint" />
            <mxPoint x="396" y="-115" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-23" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;写入阻塞队列&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="294" y="-152" width="102" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-24" value="&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;日志文件&lt;/b&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="631" y="-60.5" width="126" height="53" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-25" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="-104" as="sourcePoint" />
            <mxPoint x="709" y="-63" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-26" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;写线程异步写入&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="588" y="-118" width="116" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-27" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="294" y="-188.5" as="sourcePoint" />
            <mxPoint x="728" y="-71" as="targetPoint" />
            <Array as="points">
              <mxPoint x="730" y="-188" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-28" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;需要分文件，创建新日志文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="410" y="-226" width="200" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-29" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="13" y="-34.5" as="sourcePoint" />
            <mxPoint x="621" y="-37" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-30" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;生成日志文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="271" y="-72" width="102" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-31" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="298" y="72.5" as="sourcePoint" />
            <mxPoint x="647" y="1" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-32" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;同步直接写入&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="364" y="15" width="102" height="29" as="geometry" />
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-33" value="" style="endArrow=classic;html=1;rounded=0;strokeWidth=3;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="232" y="138" as="sourcePoint" />
            <mxPoint x="668" y="-1" as="targetPoint" />
            <Array as="points">
              <mxPoint x="668" y="138.5" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VsNNf81IzaUH2iYFKdmN-34" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;需要分文件，创建新日志文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="410" y="148" width="200" height="29" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
